<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>NPC Backlog & Capacity Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    input { padding:5px; margin:4px; width:120px; }
    .box { border:1px solid #ccc; padding:15px; margin-bottom:20px; border-radius:8px; }
  </style>
</head>
<body>
<h1>NPC Backlog & Capacity Dashboard</h1>

<div class="box">
  <h3>Backlog Inputs</h3>
  Current Backlog: <input id="currentBacklog" type="number" value="545"><br>
  Future Inflow (Janâ€“Jun): <input id="futureInflow" type="number" value="404"><br>
  Capacity: <input id="capacity" type="number" value="225"><br>
  <button onclick="updateChart()">Update Forecast</button>
</div>

<canvas id="forecastChart" height="120"></canvas>

<script>
function updateChart() {
    const months = ["Jan","Feb","Mar","Apr","May","Jun"];
    const backlog = Number(document.getElementById("currentBacklog").value);
    const inflow = Number(document.getElementById("futureInflow").value);
    const cap = Number(document.getElementById("capacity").value);

    const monthlyCreated = Math.round(inflow / 6);

    let start = backlog;
    let starts=[], creates=[], caps=[];
    for (let i=0;i<6;i++){
        starts.push(start);
        creates.push(monthlyCreated);
        caps.push(cap);
        start = Math.max(0, start + monthlyCreated - cap);
    }

    if (window.chartRef) window.chartRef.destroy();

    const ctx = document.getElementById("forecastChart").getContext("2d");
    window.chartRef = new Chart(ctx, {
        type: "line",
        data: {
            labels: months,
            datasets: [
                {label:"Start Backlog", data: starts, borderColor:"black"},
                {label:"Created", data: creates, borderColor:"blue"},
                {label:"Capacity", data: caps, borderColor:"green"}
            ]
        }
    });
}

updateChart();
</script>

</body>
</html>
